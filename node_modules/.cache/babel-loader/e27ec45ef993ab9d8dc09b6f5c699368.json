{"ast":null,"code":"var _jsxFileName = \"/home/ahmadg/Desktop/chat-challenge/src/App.js\";\nimport React, { Component } from \"react\";\nimport io from \"socket.io-client\";\nimport \"emoji-mart/css/emoji-mart.css\";\nimport { Picker } from \"emoji-mart\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isConnected: false,\n      id: null,\n      userList: [],\n      message_from_server: \"\",\n      inputResult: \"\",\n      chat: []\n    };\n    this.socket = null;\n\n    this.handleChange = e => {\n      this.setState({\n        inputResult: e.target.value\n      });\n    };\n\n    this.addEmoji = e => {\n      let emoji = e.native;\n      this.setState({\n        inputResult: this.state.inputResult + emoji\n      });\n    };\n  }\n\n  componentWillMount() {\n    this.socket = io(\"https://codi-server.herokuapp.com\");\n    this.socket.on(\"connect\", () => {\n      this.setState({\n        isConnected: true\n      });\n    });\n    this.socket.on(\"disconnect\", () => {\n      this.setState({\n        isConnected: false\n      });\n    });\n    this.socket.on(\"youare\", answer => {\n      this.setState({\n        id: answer.id\n      });\n    });\n    this.socket.on(\"peeps\", data => {\n      this.setState({\n        userList: data\n      });\n    });\n    this.socket.on(\"new connection\", NewUser => {\n      console.log(\"new connection\", NewUser);\n      const users = [...this.state.userList, NewUser];\n      this.setState({\n        userList: users\n      });\n    });\n    this.socket.on(\"new disconnection\", DisconnectUser => {\n      console.log(\"new disconnection\", DisconnectUser);\n      const filteredUsers = this.state.userList.filter(function (item) {\n        return item !== DisconnectUser;\n      });\n      this.setState({\n        userList: filteredUsers\n      });\n    });\n    /** this will be useful way, way later **/\n\n    this.socket.on(\"room\", old_messages => {\n      this.setState({\n        chat: old_messages\n      });\n      console.log(old_messages);\n    });\n  }\n\n  componentWillUnmount() {\n    this.socket.close();\n    this.socket = null;\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }, \"status: \", this.state.isConnected ? \"connected\" : \"disconnected\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }, \"id: \", this.state.id), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.socket.emit(\"whoami\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }, \"Who am I?\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        flex: \"30%\",\n        marginLeft: \"50px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, \"userList:\", /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, this.state.userList.map(user => /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }\n    }, user))), \"userNumber:\", this.state.userList.length), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, this.state.chat.map(user => /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    }, user.name, \"->\", user.text))))), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }, \"message to server :\", /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.inputResult,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => {\n        this.socket.emit(\"message\", {\n          id: this.state.id,\n          name: \"test\",\n          text: this.state.inputResult\n        });\n        this.setState({\n          inputResult: \"\"\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }, \"send\")), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Picker, {\n      onSelect: this.addEmoji,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/ahmadg/Desktop/chat-challenge/src/App.js"],"names":["React","Component","io","Picker","App","state","isConnected","id","userList","message_from_server","inputResult","chat","socket","handleChange","e","setState","target","value","addEmoji","emoji","native","componentWillMount","on","answer","data","NewUser","console","log","users","DisconnectUser","filteredUsers","filter","item","old_messages","componentWillUnmount","close","handleSubmit","event","preventDefault","render","emit","display","flex","marginLeft","map","user","length","name","text"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport io from \"socket.io-client\";\nimport \"emoji-mart/css/emoji-mart.css\";\nimport { Picker } from \"emoji-mart\";\n\nclass App extends Component {\n  state = {\n    isConnected: false,\n    id: null,\n    userList: [],\n    message_from_server: \"\",\n    inputResult: \"\",\n    chat: []\n  };\n  socket = null;\n\n  handleChange = e => {\n    this.setState({ inputResult: e.target.value });\n  };\n  componentWillMount() {\n    this.socket = io(\"https://codi-server.herokuapp.com\");\n\n    this.socket.on(\"connect\", () => {\n      this.setState({ isConnected: true });\n    });\n\n    this.socket.on(\"disconnect\", () => {\n      this.setState({ isConnected: false });\n    });\n    this.socket.on(\"youare\", answer => {\n      this.setState({ id: answer.id });\n    });\n    this.socket.on(\"peeps\", data => {\n      this.setState({ userList: data });\n    });\n    this.socket.on(\"new connection\", NewUser => {\n      console.log(\"new connection\", NewUser);\n      const users = [...this.state.userList, NewUser];\n      this.setState({ userList: users });\n    });\n    this.socket.on(\"new disconnection\", DisconnectUser => {\n      console.log(\"new disconnection\", DisconnectUser);\n      const filteredUsers = this.state.userList.filter(function(item) {\n        return item !== DisconnectUser;\n      });\n      this.setState({ userList: filteredUsers });\n    });\n\n    /** this will be useful way, way later **/\n    this.socket.on(\"room\", old_messages => {\n      this.setState({ chat: old_messages });\n      console.log(old_messages);\n    });\n  }\n\n  componentWillUnmount() {\n    this.socket.close();\n    this.socket = null;\n  }\n  handleSubmit(event) {\n    event.preventDefault();\n  }\n  addEmoji = e => {\n    let emoji = e.native;\n    this.setState({\n      inputResult: this.state.inputResult + emoji\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div>\n          status: {this.state.isConnected ? \"connected\" : \"disconnected\"}\n        </div>\n        <div>id: {this.state.id}</div>\n        <button onClick={() => this.socket.emit(\"whoami\")}>Who am I?</button>\n        <div style={{ display: \"flex\" }}>\n          <div style={{ flex: \"30%\", marginLeft: \"50px\" }}>\n            userList:\n            <ul>\n              {this.state.userList.map(user => (\n                <li>{user}</li>\n              ))}\n            </ul>\n            userNumber:{this.state.userList.length}\n          </div>\n          <div>\n            <ul>\n              {this.state.chat.map(user => (\n                <li>\n                  {user.name}->{user.text}\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n        <form onSubmit={this.handleSubmit}>\n          message to server :\n          <input\n            value={this.state.inputResult}\n            onChange={this.handleChange}\n          ></input>\n          <button\n            onClick={() => {\n              this.socket.emit(\"message\", {\n                id: this.state.id,\n                name: \"test\",\n                text: this.state.inputResult\n              });\n\n              this.setState({ inputResult: \"\" });\n            }}\n          >\n            send\n          </button>\n        </form>\n        <span>\n          <Picker onSelect={this.addEmoji} />\n        </span>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}